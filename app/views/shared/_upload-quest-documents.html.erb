<%= simple_form_for @medium, :url => media_path, :method => :post, remote: true do |f| %>
  <%= f.hidden_field :quest, value: @quest.id %>
  <%= f.hidden_field :team_quest_link, value: @team_quest_link_id %>
  <%= f.input :attached_file, as: :file, label: false%>

  <div id="media-grid">

    <% if !@team_quest_link.blank? && !@team_quest_link.media.blank? %>

        <% @team_quest_link.media.each do |medium| %>
          <div class="media-grid-item"

            <% if medium.type_of == "video/mp4" %>
              >
              <%= cl_video_tag(medium.attached_file.key, controls: true, fetch_format: :auto, width: '100%', height: '100%', transformation: [crop: "pad"]) %>

            <% else %>
              style="background-image: url('<%= cloudinary_url(medium.attached_file.key) %>')">
              <%#= cl_image_tag medium.attached_file.key%>

            <% end %>
            <%= link_to "-", medium_path(medium), method: :delete, data: { confirm: "Are you sure?" }, class: "remove-medium" %>
          </div>
        <% end %>

    <% end %>

    <div id="add-medium-to-tql">
      <p>+</p>
      <div id="upload-spinner" class="spinner-border text-success" role="status"></div>
    </div>

  </div>
  <%= button_tag "CONFIRM", type: 'submit', id: "upload-medium" %>
<% end %>
